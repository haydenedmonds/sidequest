let has_process_run_at_least_once=!1,old_transition="",has_background_img_url=!1,darken_level=parseInt(darkify_bg_image_darken_to)/100,darkify_secondary_bg_color=(darken_level=darken_level.toFixed(1),""),darkify_observer=(darkify_init_keyboard_shortcut_listener(),darkify_init_os_mode_change_listener(),new MutationObserver(function(e){darkify_init_processes()})),elements_class_changed=new MutationObserver(e=>{"loading"!==document.readyState&&e.forEach(e=>{e=e.target;if(e.classList.contains("darkify_processed")){if(e.hasAttribute("data-darkify_preserved_classes")){if(e.dataset.darkify_preserved_classes===e.classList.toString())return}else e.dataset.darkify_preserved_classes=e.classList.toString();e.dataset.darkify_preserved_classes=e.classList.toString(),elements_class_changed.disconnect(),e.classList.remove("darkify_processed"),darkify_process_element(e),document.querySelectorAll("*:not(head, title, link, meta, script, style, defs, filter)").forEach(e=>{elements_class_changed.observe(e,{attributes:!0,attributeFilter:["class"]})})}})}),dark_mode_status_changed=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"class"===e.attributeName&&document.querySelectorAll("*:not(head, title, link, meta, script, style, defs, filter)").forEach(e=>{var a;!e.classList.contains("darkify_processed")||0<darkify_disallowed_elements.length&&e.matches(darkify_disallowed_elements)||("1"===darkify_enable_bg_image_darken&&darkify_darken_bg_image(e,darken_level),"1"!==darkify_enable_low_image_brightness&&"1"!==darkify_enable_image_grayscale||"img"!==e.nodeName.toLowerCase()||darkify_img_brightness_and_grayscale(e),"1"===darkify_enable_invert_inline_svg&&"svg"===e.nodeName.toLowerCase()&&darkify_invert_inline_svg(e),"1"!==darkify_enable_low_video_brightness&&"1"!==darkify_enable_video_grayscale||("video"===e.nodeName.toLowerCase()&&darkify_video_brightness_and_grayscale(e),"iframe"===e.nodeName.toLowerCase()&&null!=e.getAttribute("src")&&((a=e.getAttribute("src")).includes("youtube")||a.includes("vimeo")||a.includes("dailymotion"))&&darkify_video_brightness_and_grayscale(e)),e.hasAttribute("data-darkify_alpha_bg")&&darkify_fix_background_color_alpha(e))})})});function darkify_change_state(){"1"===darkify_is_this_admin_panel?localStorage.darkify_admin_panel_last_state=document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?"1":"0":localStorage.darkify_last_state=document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?"1":"0"}function darkify_switch_trigger(){has_process_run_at_least_once||(darkify_init_processes(),darkify_init_observer());var e=document.getElementsByTagName("html")[0];e.classList.contains("darkify_dark_mode_enabled")?e.classList.remove("darkify_dark_mode_enabled"):e.classList.add("darkify_dark_mode_enabled"),darkify_change_state()}function darkify_init_keyboard_shortcut_listener(){"1"===darkify_enable_keyboard_shortcut&&(document.onkeydown=function(e){e.ctrlKey&&e.altKey&&68===e.keyCode&&darkify_switch_trigger()})}function darkify_init_os_mode_change_listener(){"0"===darkify_is_this_admin_panel&&"1"===darkify_enable_os_aware&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{var e=e.matches?"dark":"light",a=document.getElementsByTagName("html")[0];"dark"==e?a.classList.add("darkify_dark_mode_enabled"):"light"==e&&a.classList.remove("darkify_dark_mode_enabled"),darkify_change_state()})}function darkify_init_alternative_dark_mode_switch(){if(0<darkify_alternative_dark_mode_switch.length){var a=document.querySelectorAll(darkify_alternative_dark_mode_switch);for(let e=0;e<a.length;e++)a[e].addEventListener("click",()=>{darkify_switch_trigger()})}}function get_bg_color_to_preserve(e,a){let t=window.getComputedStyle(e,null).backgroundColor;return t=("transparent"===(t=a?t:e.dataset.darkify_preserved_bg)||"rgba(0, 0, 0, 0)"===t||"rgba(255,255,255,0)"===t)&&1===e.parentNode.nodeType||1===e.parentNode.nodeType&&e.parentNode.hasAttribute("data-darkify_preserved_bg")&&window.getComputedStyle(e.parentNode,null).backgroundColor===t?get_bg_color_to_preserve(e.parentNode,!1):t}function get_txt_color_to_preserve(e,a){let t=window.getComputedStyle(e,null).color;return t=("transparent"===(t=a?t:e.dataset.darkify_preserved_color)||"rgba(0, 0, 0, 0)"===t||"rgba(255,255,255,0)"===t)&&1===e.parentNode.nodeType||1===e.parentNode.nodeType&&e.parentNode.hasAttribute("data-darkify_preserved_color")&&window.getComputedStyle(e.parentNode,null).color===t?get_txt_color_to_preserve(e.parentNode,!1):t}function darkify_darken_bg_image(a,t){if(document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")){var r=window.getComputedStyle(a,null),s=window.getComputedStyle(a,":before"),i=window.getComputedStyle(a,":after");if("none"!==r.backgroundImage&&r.backgroundImage.includes("url")&&!r.backgroundImage.includes("rgba(0, 0, 0, "+t+")")&&a.style.setProperty("background-image","linear-gradient(rgba(0, 0, 0, "+t+"), rgba(0, 0, 0, "+t+")), "+r.backgroundImage),"none"!==s.backgroundImage&&s.backgroundImage.includes("url")&&!s.backgroundImage.includes("rgba(0, 0, 0, "+t+")")){r="darkify-before-"+Math.random().toString(36).substr(2,9);a.setAttribute("data-darkify-style-id",r);let e=document.getElementById(r);e||((e=document.createElement("style")).id=r,document.head.appendChild(e)),a.dataset.darkifyOriginalBeforeBg=s.backgroundImage;r=`
        .darkify_dark_mode_enabled [data-darkify-style-id="${r}"]::before {
          background-image: linear-gradient(rgba(0, 0, 0, ${t}), rgba(0, 0, 0, ${t})), ${s.backgroundImage} !important;
        }
      `;e.textContent=r,"static"===window.getComputedStyle(a).position&&(a.style.position="relative")}if("none"!==i.backgroundImage&&i.backgroundImage.includes("url")&&!i.backgroundImage.includes("rgba(0, 0, 0, "+t+")")){s="darkify-after-"+Math.random().toString(36).substr(2,9);a.setAttribute("data-darkify-style-id",s);let e=document.getElementById(s);e||((e=document.createElement("style")).id=s,document.head.appendChild(e)),a.dataset.darkifyOriginalAfterBg=i.backgroundImage;r=`
        .darkify_dark_mode_enabled [data-darkify-style-id="${s}"]::after {
          background-image: linear-gradient(rgba(0, 0, 0, ${t}), rgba(0, 0, 0, ${t})), ${i.backgroundImage} !important;
        }
      `;e.textContent=r,"static"===window.getComputedStyle(a).position&&(a.style.position="relative")}}else"none"!==window.getComputedStyle(a,null).backgroundImage&&window.getComputedStyle(a,null).backgroundImage.includes("rgba(0, 0, 0, "+t+")")&&a.style.setProperty("background-image",window.getComputedStyle(a,null).backgroundImage.replace("linear-gradient(rgba(0, 0, 0, "+t+"), rgba(0, 0, 0, "+t+")), ",""))}function darkify_img_brightness_and_grayscale(e){document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?e.classList.contains("darkify_changed_brightness_and_grayscale")||(e.dataset.darkify_preserved_filter=e.style.filter,e.classList.add("darkify_changed_brightness_and_grayscale"),"1"===darkify_enable_low_image_brightness&&"1"===darkify_enable_image_grayscale?e.style.filter="brightness("+darkify_image_brightness_to+"%) grayscale("+darkify_image_grayscale_to+"%)":"1"===darkify_enable_low_image_brightness?e.style.filter="brightness("+darkify_image_brightness_to+"%)":"1"===darkify_enable_image_grayscale&&(e.style.filter="grayscale("+darkify_image_grayscale_to+"%)")):e.classList.contains("darkify_changed_brightness_and_grayscale")&&(e.style.filter=e.dataset.darkify_preserved_filter,e.classList.remove("darkify_changed_brightness_and_grayscale"),delete e.dataset.darkify_preserved_filter)}function darkify_invert_inline_svg(e){document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?(e.style.filter="invert(1)",e.classList.add("darkify_inverted_inline_svg")):e.classList.contains("darkify_inverted_inline_svg")&&(e.style.filter=e.style.filter.replace("invert(1)",""),e.classList.remove("darkify_inverted_inline_svg"))}function darkify_video_brightness_and_grayscale(e){document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?e.classList.contains("darkify_changed_video_brightness_and_grayscale")||(e.dataset.darkify_preserved_filter=e.style.filter,e.classList.add("darkify_changed_video_brightness_and_grayscale"),"1"===darkify_enable_low_video_brightness&&"1"===darkify_enable_video_grayscale?e.style.filter="brightness("+darkify_video_brightness_to+"%) grayscale("+darkify_video_grayscale_to+"%)":"1"===darkify_enable_low_video_brightness?e.style.filter="brightness("+darkify_video_brightness_to+"%)":"1"===darkify_enable_video_grayscale&&(e.style.filter="grayscale("+darkify_video_grayscale_to+"%)")):e.classList.contains("darkify_changed_video_brightness_and_grayscale")&&(e.style.filter=e.dataset.darkify_preserved_filter,e.classList.remove("darkify_changed_video_brightness_and_grayscale"),delete e.dataset.darkify_preserved_filter)}function darkify_replace_video(a,t){if(document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled"))for(let e=0;e<t.length;e++){var r=t[e].normal_video,s=new URL(r).pathname,i=t[e].dark_video;new URL(i).pathname;if(null!=a.getAttribute("src")&&a.getAttribute("src").includes(s)&&(a.src=i,a.classList.add("darkify_replaced_video")),null!=a.querySelectorAll("source")){var d=a.querySelectorAll("source");for(let e=0;e<d.length;e++)null!=d[e].getAttribute("src")&&d[e].getAttribute("src").includes(s)&&(d[e].src=i+"?_="+Date.now(),a.classList.add("darkify_replaced_video"),a.load())}}else if(a.classList.contains("darkify_replaced_video"))for(let e=0;e<t.length;e++){var _=t[e].normal_video,n=(new URL(_).pathname,t[e].dark_video),l=new URL(n).pathname;if(null!=a.getAttribute("src")&&a.getAttribute("src").includes(l)&&(a.src=_,a.classList.remove("darkify_replaced_video")),null!=a.querySelectorAll("source")){var o=a.querySelectorAll("source");for(let e=0;e<o.length;e++)null!=o[e].getAttribute("src")&&o[e].getAttribute("src").includes(l)&&(o[e].src=_+"?_="+Date.now(),a.classList.remove("darkify_replaced_video"),a.load())}}}function darkify_fix_background_color_alpha(e){var a,t;document.getElementsByTagName("html")[0].classList.contains("darkify_dark_mode_enabled")?e.hasAttribute("data-darkify_alpha_bg")&&(a=e.dataset.darkify_alpha_bg.replace("rgba(","").replace(")","").split(",")[3].trim(),(t=window.getComputedStyle(e,null).backgroundColor).includes("rgba")||e.style.setProperty("background-color",t.replace(")",", "+a+")").replace("rgb","rgba"),"important")):e.hasAttribute("data-darkify_alpha_bg")&&(e.style.backgroundColor="")}function darkify_implement_secondary_bg(){let a=null,t=0;var r=document.querySelectorAll("* :not(head, title, link, meta, script, style, defs, filter)");for(let e=0;e<r.length;e++){var s,i=r[e];i.hasAttribute("data-darkify_secondary_bg_finder")&&"transparent"!==(s=i.dataset.darkify_secondary_bg_finder)&&"rgba(0, 0, 0, 0)"!==s&&(i=(i=i.getBoundingClientRect()).width*i.height)>t&&(t=i,a=s)}for(let e=0;e<r.length;e++){var d=r[e];d.hasAttribute("data-darkify_secondary_bg_finder")&&((d.classList.contains("darkify_style_all")||d.classList.contains("darkify_style_bg_txt")||d.classList.contains("darkify_style_bg_border")||d.classList.contains("darkify_style_bg"))&&a!==d.dataset.darkify_secondary_bg_finder&&d.classList.add("darkify_style_secondary_bg"),delete d.dataset.darkify_secondary_bg_finder)}darkify_secondary_bg_color=a}function darkify_recheck_on_css_loaded_later(){document.querySelectorAll(".darkify_style_txt_border, .darkify_style_txt, .darkify_style_border").forEach(function(e){var a=window.getComputedStyle(e,null).backgroundColor;"rgba(0, 0, 0, 0)"!==a&&"rgba(255, 255, 255, 0)"!==a&&darkify_process_element(e)})}function darkify_check_preloading(){let e=!1;var a,t,r,s=localStorage.darkify_last_state||"not_set";return"1"===darkify_is_this_admin_panel?"1"===(localStorage.darkify_admin_panel_last_state||"not_set")&&(e=!0):"1"===s||"0"===s?"1"===s&&(e=!0):("1"===darkify_enable_default_dark_mode&&(e=!0),"1"===darkify_enable_time_based_dark&&(a=new Date,t=new Date,r=new Date,t.setHours(parseInt(darkify_time_based_dark_start.split(":")[0])),t.setMinutes(parseInt(darkify_time_based_dark_start.split(":")[1])),r.setHours(parseInt(darkify_time_based_dark_stop.split(":")[0])),r.setMinutes(parseInt(darkify_time_based_dark_stop.split(":")[1])),parseInt(darkify_time_based_dark_stop.split(":")[0])>=parseInt(darkify_time_based_dark_start.split(":")[0])?a.getTime()>t.getTime()&&a.getTime()<r.getTime()&&(e=!0):12<a.getHours()?a.getTime()>t.getTime()&&a.getTime()>r.getTime()&&(e=!0):a.getTime()<t.getTime()&&a.getTime()<r.getTime()&&(e=!0))),e="0"===darkify_is_this_admin_panel&&"1"===darkify_enable_os_aware&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&"1"!==s&&"0"!==s?!0:e}function darkify_process_element(a){var e,t=window.getComputedStyle(a,null),r=((a.classList.contains("darkify_style_all")||a.classList.contains("darkify_style_bg_txt")||a.classList.contains("darkify_style_bg_border")||a.classList.contains("darkify_style_txt_border")||a.classList.contains("darkify_style_bg")||a.classList.contains("darkify_style_txt")||a.classList.contains("darkify_style_border")||a.classList.contains("darkify_style_secondary_bg"))&&(a.classList.remove("darkify_style_all"),a.classList.remove("darkify_style_bg_txt"),a.classList.remove("darkify_style_bg_border"),a.classList.remove("darkify_style_txt_border"),a.classList.remove("darkify_style_bg"),a.classList.remove("darkify_style_txt"),a.classList.remove("darkify_style_border"),a.classList.remove("darkify_style_secondary_bg")),a.nodeName.toLowerCase()),s=t.backgroundColor,i=t.color,d=t.borderColor,t=t.backgroundImage;"body"!==r||"rgba(0, 0, 0, 0)"!==s&&"rgba(255, 255, 255, 0)"!==s||(a.style.setProperty("background-color","rgb(255, 255, 255)"),s=window.getComputedStyle(a,null).backgroundColor),0<darkify_disallowed_elements.length&&a.matches(darkify_disallowed_elements)||(e=!1,"none"!==t&&t.includes("url")&&(e=!0,"1"===darkify_enable_bg_image_darken)&&darkify_darken_bg_image(a,darken_level),"rgba(0, 0, 0, 0)"===s||"rgba(255, 255, 255, 0)"===s||e||(a.hasAttribute("data-darkify_secondary_bg_finder")||(a.dataset.darkify_secondary_bg_finder=s),""!==darkify_secondary_bg_color&&(darkify_secondary_bg_color!==a.dataset.darkify_secondary_bg_finder&&a.classList.add("darkify_style_secondary_bg"),delete a.dataset.darkify_secondary_bg_finder)),"rgba(0, 0, 0, 0)"!==s&&"rgba(0, 0, 0, 0)"!==i&&"rgba(0, 0, 0, 0)"!==d&&"rgba(255, 255, 255, 0)"!==s&&"rgba(255, 255, 255, 0)"!==i&&"rgba(255, 255, 255, 0)"!==d&&!1===e?a.classList.add("darkify_style_all"):"rgba(0, 0, 0, 0)"!==s&&"rgba(0, 0, 0, 0)"!==i&&"rgba(255, 255, 255, 0)"!==s&&"rgba(255, 255, 255, 0)"!==i&&!1===e?a.classList.add("darkify_style_bg_txt"):"rgba(0, 0, 0, 0)"!==s&&"rgba(0, 0, 0, 0)"!==d&&"rgba(255, 255, 255, 0)"!==s&&"rgba(255, 255, 255, 0)"!==d&&!1===e?a.classList.add("darkify_style_bg_border"):"rgba(0, 0, 0, 0)"!==i&&"rgba(0, 0, 0, 0)"!==d&&"rgba(255, 255, 255, 0)"!==i&&"rgba(255, 255, 255, 0)"!==d?a.classList.add("darkify_style_txt_border"):"rgba(0, 0, 0, 0)"!==s&&"rgba(255, 255, 255, 0)"!==s&&!1===e?a.classList.add("darkify_style_bg"):"rgba(0, 0, 0, 0)"!==i&&"rgba(255, 255, 255, 0)"!==i?a.classList.add("darkify_style_txt"):"rgba(0, 0, 0, 0)"!==d&&"rgba(255, 255, 255, 0)"!==d&&a.classList.add("darkify_style_border"),"none"===t||e||a.classList.contains("darkify_style_all")||a.classList.contains("darkify_style_bg_txt")||a.classList.contains("darkify_style_bg_border")||a.classList.contains("darkify_style_bg")||a.classList.add("darkify_style_bg"),"a"===r&&a.classList.add("darkify_style_link"),"input"!==r&&"select"!==r&&"textarea"!==r||a.classList.add("darkify_style_form_element"),i=darkify_allowed_btn_class.some(e=>a.classList.contains(e)),"button"!==r&&!i&&"submit"!==a.type||(a.classList.add("darkify_style_button"),a.classList.remove("darkify_style_secondary_bg"),a.classList.remove("darkify_style_all"),a.classList.remove("darkify_style_link")),"1"!==darkify_enable_low_image_brightness&&"1"!==darkify_enable_image_grayscale||"img"!==r||darkify_img_brightness_and_grayscale(a),"1"===darkify_enable_invert_inline_svg&&"svg"===r&&darkify_invert_inline_svg(a),"1"!==darkify_enable_low_video_brightness&&"1"!==darkify_enable_video_grayscale||("video"===r&&darkify_video_brightness_and_grayscale(a),"iframe"===r&&null!==(d=a.getAttribute("src"))&&(d.includes("youtube")||d.includes("vimeo")||d.includes("dailymotion"))&&darkify_video_brightness_and_grayscale(a)),s.includes("rgba")&&(a.dataset.darkify_alpha_bg=s,darkify_fix_background_color_alpha(a)),setTimeout(function(){elements_class_changed.observe(a,{attributes:!0,attributeFilter:["class"]})},0),a.classList.add("darkify_processed"))}function darkify_init_processes(){has_process_run_at_least_once=!0,document.querySelectorAll("* :not(head, title, link, meta, script, style, defs, filter, .darkify_processed)").forEach(function(e){darkify_process_element(e)})}function darkify_init_observer(){darkify_observer.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),dark_mode_status_changed.observe(document.getElementsByTagName("html")[0],{attributes:!0}),"loading"!==document.readyState?(has_process_run_at_least_once||darkify_init_processes(),darkify_implement_secondary_bg(),darkify_recheck_on_css_loaded_later()):document.addEventListener("DOMContentLoaded",function(){has_process_run_at_least_once||darkify_init_processes(),darkify_implement_secondary_bg(),darkify_recheck_on_css_loaded_later()})}darkify_check_preloading()&&(document.getElementsByTagName("html")[0].classList.add("darkify_dark_mode_enabled"),darkify_init_observer());